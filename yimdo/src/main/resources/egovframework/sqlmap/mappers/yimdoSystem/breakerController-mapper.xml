<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
	
<mapper namespace="egovframework.yimdoSystem.breakerController.BreakerControllerMapper">

	<update id="updateBreakerPolicyDetail">
		UPDATE
			BREAKER_INFO
		SET
			BREAKER_POLICY_CODE = #{breakerPolicyCode},
			ELEMENT_CODE = #{elementCode},
			MODIFY_DETAIL = #{modifyDetail},
			MODIFY_DATE = NOW(),
			MODIFIER = #{modifier},
			SYSTEM_CONTROL = #{systemControl}
		WHERE
			BREAKER_ID = #{breakerId}
    </update>

    <insert id="insertBreakerHistory" parameterType="BreakerHistoryVo" useGeneratedKeys="true" keyProperty="breakerHistoryId">
    	INSERT INTO
    		BREAKER_HISTORY
    		(
	    		YIMDO_CODE,
				BREAKER_ID,
				BREAKER_POLICY_CODE,
				MODIFY_REQ_DATE,
				MODIFIER,
				ELEMENT_CODE,
				MODIFY_DETAIL,
				DB_REQ_DATE
    		)
    	VALUES
    		(
    			#{yimdoCode},
    			#{breakerId},
    			#{breakerPolicyCode},
    			NOW(),
    			#{modifier},
    			#{elementCode},
    			#{modifyDetail},
    			#{dbReqDate}
    		)
    </insert>	
</mapper>